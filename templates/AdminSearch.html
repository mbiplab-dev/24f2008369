<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Parking Summary</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", "Roboto", sans-serif;
      }
      .card {
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      }
      body.modal-open .content-blur {
        filter: blur(5px);
        transition: filter 0.3s ease-in-out;
      }
    </style>
  </head>
  <body>
    {%include "Info.html"%}
    <div class="content-blur px-5">
      <div
        class="container mt-4 p-3 d-flex justify-content-center rounded-4"
        style="
          margin: 0 0 0 0;
          max-width: 100vw;
          background-color: #671f68bb;
          border: 3px solid #4a154b;
        "
      >
        <form method="POST" class="w-100">
          <div class="input-group">
            <button
              class="btn btn-outline-light dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              id="dropdownMenuButton"
            >
              Search by
            </button>
            <ul class="dropdown-menu">
              <li>
                <a
                  class="dropdown-item"
                  href="#"
                  onclick="selectOption('User Id')"
                  >User Id</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a
                  class="dropdown-item"
                  href="#"
                  onclick="selectOption('User Address')"
                  >User Address</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a
                  class="dropdown-item"
                  href="#"
                  onclick="selectOption('Lot Id')"
                  >Lot Id</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a
                  class="dropdown-item"
                  href="#"
                  onclick="selectOption('Lot Address')"
                  >Lot Address</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a
                  class="dropdown-item"
                  href="#"
                  onclick="selectOption('Spot Id')"
                  >Spot Id</a
                >
              </li>
            </ul>

            <input
              type="hidden"
              name="filter_by"
              id="filterInput"
              value="location"
            />

            <input
              type="text"
              class="form-control border-2 rounded-2 mx-3"
              name="query"
              placeholder="Search string"
              aria-label="Search input"
              required
            />

            <button class="btn btn-light" type="submit">Search</button>
          </div>
        </form>
      </div>
      <div style="width: 100%">
        {%if (filter_by)%} {%if (filter_by=="Lot Address")%} {%include
        "AllLots.html"%} {%elif (filter_by=="User Id")%} {%include
        "Users.html"%} {%elif (filter_by=="User Address")%} {%include
        "Users.html"%} {%elif (filter_by=="Lot Id")%} {%include "AllLots.html"%}
        {%elif (filter_by=="Spot Id")%}
        <div
          class="rounded-4 m-3"
          style="
            max-width: 500px;
            background-color: #6c1e6da6;
            border: 3px solid #4a154b;
          "
        >
          <h3 class="mb-0 text-white d-flex justify-content-center p-2">
            Spot details
          </h3>

          <div class="d-flex flex-column text-white m-2 gap-3">
            <h5><strong>Spot ID:</strong> {{ search_query }}</h5>
            <h5><strong>Lot ID:</strong> {{ results[0] }}</h5>
            <h5><strong>Lot Name:</strong> {{ results[1] }}</h5>
            <h5><strong>Lot Address:</strong> {{ results[3] }}</h5>
            <h5>
              <strong>Availability:</strong>
              {% if results[7] == 'A' %}
              <span class="badge bg-success"
                ><h5 class="mb-0">Available</h5></span
              >
              {% else %}
              <span class="badge bg-danger"
                ><h5 class="mb-0">Occupied</h5></span
              >
              {% endif %}
            </h5>
          </div>
        </div>
        {%else%}
        <div class="w-100 d-flex p-3 justify-content-center">
          <h1>No Results</h1>
        </div>
        {%endif%} {%endif%}
      </div>
    </div>
    {%include "LogoutCard.html"%}
    <script>
      function selectOption(value) {
        document.getElementById("filterInput").value = value;
        document.getElementById("dropdownMenuButton").textContent =
          "Search by: " + value;
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
